# SearchPhotoDuplicates

Программа создана для поиска полностью идентичных файлов-изображений на компьютере в указанной директории с применением паттерна **MVVM**.
Поиск осуществляется в **отдельном потоке** с использованием **BackgroundWorker** и контрольной суммы **MD5**.

# Содержание
1. [Интерфейс](#Описание_интерфейса)
   1. [Область списка найденных изображений](#Область_списка_найденных_изображений)
   2. [Область копий выбранного изображения](#Область_копий_выбранного_изображения)
2. [Функции](#Функции)

## Интерфейс<a name="Описание_интерфейса"></a>

Интерфейс программы построен на **WPF** и состоит из двух основных частей: 
1. Список найденных изображений.
2. Список копий выбранного в первой части изображения.

Списки выводятся в **DataGrid**, в каждой строчке которого указаны основные данные о каждом найденном файле.

Далее приведено описание каждой части интерфейса в порядке сверху-вниз.

### Область списка найденных изображений<a name="Область_списка_найденных_изображений"></a>
****
**Верхняя панель.** 

На панели расположены две кнопки:
1. **Кнопка управления поиском.** 
*При первичном запуске программы* надпись на кнопке *"Найти изображения"*. При нажатии на кнопку появляется окно для ввода/выбора директории для поиска.
*После ввода/выбора директории* начинается поиск и надпись на кнопке меняется на *"Остановить поиск"*. Нажатие на кнопку с такой надписью приведет к остановке поиска. 
Изображения, которые были найдены до нажатия на кнопку останутся в списке и с ними можно выполнять действия, предусмотренные программой. 
*Если поиск изображений доведен до конца*, то надпись на кнопке меняется на *"Новый поиск"*. При нажатии на кнопку с этой надписью появится окно ввода/выбора директории для поиска.
*После выбора новой директории* для поиска список изображения будет полностью обновлен - изображения, найденные в старой директории удалены из списка, изображения новой директории добавлены в него.
*Во время нового поиска* надпись на кнопке вновь меняется на *"Остановить поиск"*.
2. **Кнопка "Удалить все копии с диска"**. Кнопка *не активна* при первичном запуске программы и при пустом списке изображений. 
После заполнения списка, которое осуществляется способом, описанным в предыдущем пункте, кнопка становится *активной*.
***Нажатие на кнопку приведет к удалению всех найденных копий с диска.***
****
**Область просмотра изображений**

Область состоит из:
+ Надписи "Изображения, найденные в директории:"с указанием директории, в которой осуществлялся поиск изображений.
+ Области для вывода на экран выбранного изображения.
****
**Панель управления списком изображений**

На панели расположены в ряд следующие инструменты управления:
1. **Фильтр** в виде выпадающего списка с заранее запрограммированными фильтрами списка найденныхх изображений.
Для фильтрации доступны *2 варианта*:
* **"Показать изображения с копиями"** - фильтр удаляет из списка все изображения, для которых копий не найдено.
* **"Показать все изображения"** - если ранее был выбран фильтр "Показать изображения с копиями" - этот фильтр добавляет обратно в список все изображения, для которых копий не найдено.
2. **Поиск** - текстовое поле для поиска в списке. При вводе текста в поле, в списке остаются только те строки, которые содержат введенные в поле символы.
3. **Обновить список** - кнопка не активна при первичном запуске программы и пустом списке. После заполнения списка, кнопка становится активной и нажатие на нее приводит к удалению всех элементов из списка и запуску нового поиска в той же директории, которая была указана до этого.
****
**Список найденных изображений**

Список найденных изображений выводится в форма таблицы со следующими столбцами:
+ *Name* - имя файла (изображения)
+ *Copies* - количество найденных копий этого изображения
+ *Size* - размер изображения(в основном в МБ, если размер меньше 1 МБ, то в КБ)
+ *Creation date and time* - дата и время создания изображения
+ *Path* - директория, в которой расположено изображение

Для каждой строки таблицы доступно **контекстное меню**, которое вызывается нажатием на правую кнопку мыши и состоит из следующих пунктов:
+ *Открыть* - открыть выбранный файл
+ *Открыть в папке* - открыть папку, в которой находится выбранный файл
+ *Удалить из списка* - удаление выбранного изображения из списка найденных изображений. На диске изображение остается.
+ *Удалить с диска* - удаление выбранного изображения с диска.
+ *Переместить в другую папку* - перемещение выбранного изображения в другую директории. При выборе этого пункта появляется окно для ввода/выбора новой директории.
+ *Переименовать* - переименование выбранного изображения
****
**Область информации о выбранных файлах**

В области расположена информация об общем количестве выбранных в списке чекбоксами изображений, их суммарном размере.При отсутсвии выбранных файлов, поле не отображается.
****
**Область о коллекции найденных изображений**

В области отображается информация о коллекции фотографий в целом:
+ количество, 
+ размер, 
+ инфорация о найденных копиях.
****
### Область копий выбранного изображения<a name="Область_копий_выбранного_изображения"></a>
****
**Область просмотра изображений**

В области выводится на экран выбранное в правом списке изображение.
****
**Панель управления списком изображений**

На панели расположены две кнопки:
+ *Удалить все копии с диска* - при первичном запуске программы кнопка недоступна. После заполнения списка кнопка становится активной. Нажатие на кнопку приведет к удалению с диска всех копий, найденных для выбранного оригинала.
+ *Очистить список* - кнопка удаляет все строки из списка копий выбранного оригинала. Сами изображения остаются на диске и при новом поиске в той же директории опять появятся в списке.
****
**Список найденных копий выбранного изображения**

Список копий выбранного в списке слева изображения выводится на экран в виде таблицы со следующими столбцами:
+ *Copy name* - имя файла(изображения)-копии.
+ *Copy size* - размер копии(в основном в МБ, если размер меньше 1 МБ, то в КБ).
+ *Copy creation date and time* - дата и время создания копии.
+ *Copy path* - директория, в которой расположена копия выбранного оригинала.

Для каждой строки списка доступно **контекстное меню**, пункты меню те же, что и в левой таблице.
****
**Область информации о выбранных файлах**

В области расположена информация об общем количестве выбранных в списке чекбоксами изображений, их суммарном размере.При отсутсвии выбранных файлов, поле не отображается.
****

## Функции<a name="Функции"></a>
1. Поиск файлов в указанной директории и всех ее поддиректориях с расширениями:
*".jpeg"*, *".tiff"*, *".tif"*, *".bmp"*, *".gif"*, *".eps"*, *".png"*, *".pict"*, *".pdf"*, *".pcx"*, *".ico"*, *".cdr"*, *".ai"*, *".raw"*, *".svg"*, *".jpg"*

2. Для каждого найденного изображения рассчитывается сумма MD5.

3. Каждое найденное изображение сравнивается с уже найденными. При обнаружении совпадения по MD5 ранее найденная копия считается оригиналом, а вновь найденная заносится в список копий оригинала.

4. Поиск изображений происходит в отдельном потоке, во время поиска можно выполнять предусмотренные программой действия с уже найденными изображениями.

3. В процессе поиска происходит подсчет следующих данных:
+ общее количество найденных изображений
+ общее количество найденных копий
+ объем дискового пространства, занимаемого изображениями
+ объем дискового пространства, занимаемого копиями

2. Интерфейс программы позволяет:
+ просмотреть само изображение и его копии. Для просмотра копий, найденных для конкретного изображения, необходимо выделить это изображение в списке слева;
+ переименование файлов;
+ перемещать/удалять найденные изображения;
+ открытие файлов;
+ открывать папку с найденным изображением;
+ сортировать список изображений по всем столбцам как в порядке **возрастания**, так и **убывания**.
